# ── Database ──────────────────────────────────────────────────────────────────
# Option A: Local Docker Postgres (default)
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/financial_mcp

# Option B: Supabase Postgres (uncomment and fill in)
# DATABASE_URL=postgresql+asyncpg://<user>:<password>@<host>:5432/postgres

# Sync URL used by Alembic migrations (swap asyncpg → psycopg2)
DATABASE_URL_SYNC=postgresql+psycopg2://postgres:postgres@localhost:5432/financial_mcp

# ── App ───────────────────────────────────────────────────────────────────────
APP_ENV=development
LOG_LEVEL=INFO
MCP_SERVER_NAME=financial-data-mcp
MCP_SERVER_VERSION=0.1.0

# ── FastAPI ───────────────────────────────────────────────────────────────────
FASTAPI_HOST=0.0.0.0
FASTAPI_PORT=8000

# ── Security ───────────────────────────────────────────────────────────────────
# Enable security headers (HSTS, CSP, X-Frame-Options, etc.)
# Set to false only in development if needed
ENABLE_SECURITY_HEADERS=true

# CORS: Allowed origins (comma-separated)
# Use '*' only in development!
# Production: ALLOWED_ORIGINS=https://app.example.com,https://admin.example.com
ALLOWED_ORIGINS=*

# Admin API key for bypassing RLS and rate limits
# Generate a strong random key for production
# ADMIN_API_KEY=your-secure-random-key-here

# ── Row Level Security (RLS) ────────────────────────────────────────────────────
# Enable RLS for multi-tenant deployments
# Requires PostgreSQL (not SQLite)
ENABLE_RLS=false

# Supabase JWT secret for authentication
# Required if ENABLE_RLS=true
# SUPABASE_JWT_SECRET=your-supabase-jwt-secret

# ── Rate Limiting ───────────────────────────────────────────────────────────────
# Enable rate limiting
RATE_LIMIT_ENABLED=true

# Default rate limit (requests per minute)
RATE_LIMIT_DEFAULT=60

# Rate limit for compare_companies (more expensive operation)
RATE_LIMIT_COMPARE=30

# ── Pagination ──────────────────────────────────────────────────────────────────
# Secret key for signing pagination cursors
# Change this to a secure random string in production
CURSOR_SECRET=change-me-in-production

# ── Example Production Configuration ────────────────────────────────────────────
# ENABLE_SECURITY_HEADERS=true
# ALLOWED_ORIGINS=https://yourapp.com,https://admin.yourapp.com
# ENABLE_RLS=true
# SUPABASE_JWT_SECRET=your-jwt-secret-from-supabase
# ADMIN_API_KEY=sk-admin-$(openssl rand -hex 32)
# CURSOR_SECRET=$(openssl rand -hex 32)
# RATE_LIMIT_ENABLED=true
